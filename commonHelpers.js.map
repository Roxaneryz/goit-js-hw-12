{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\"; \nimport \"izitoast/dist/css/iziToast.min.css\"; \nimport axios from \"axios\";\n\nconst API_KEY = '42454875-eb3549610f297412779ff13b6';\nexport let page = 1;\nexport let totalHits = 0;\nexport const per_page = 15;\n\nexport async function fetchImages (searchImg){\n  page = 1;\n  \n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${searchImg}&image_type=photo&page=${page}&per_page=${per_page}&orientation=horizontal&safesearch=true`;\n\n\ntry {\n  const response = await axios.get(url);\n\n    if (!response.data){\n      throw new Error ('');\n    }\n\n    const data = response.data;\n\n    totalHits = data.totalHits;\n\n      if(data.hits.length > 0){\n        page += 1;\n        return data.hits\n      }\n      else {\n        iziToast.error({\n          position: \"center\",\n          title: 'Error',\n          message: 'Sorry, there are no images matching your search query. Please try again!'\n        });\n        return [];\n      }\n\n    } catch (error){\n      iziToast.error({\n        position: \"center\",\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!'\n      });\n\n      return [];\n    }\n    \n    }","\nimport SimpleLightbox from \"simplelightbox\"\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n  captionPosition: 'bottom'\n\n});\nexport function renderGallery(images) {\n    const galleryContainer = document.getElementById('gallery');\n    galleryContainer.innerHTML = images.map(createImageCard).join('');\n\n    \n     lightbox.refresh();\n   \n  }\n  \n  function createImageCard(image) {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n  \n    return `<li class=\"card\">\n    <a href=${largeImageURL} > <img\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    /> </a>\n    <ul class=\"gallery\">\n      <li class=\"li-text\"><span>Comments</span><span>${comments}</span></li>\n      <li class=\"li-text\"><span>Views</span><span>${views}</span></li>\n      <li class=\"li-text\"><span>Likes</span><span>${likes}</span></li>\n      <li class=\"li-text\"><span>Download</span><span>${downloads}</span></li>\n    </ul>\n  </li>`\n\n  \n  } \n  \n\n\n\n","import {fetchImages, page, totalHits, per_page} from './js/pixabay-api.js'\nimport {renderGallery} from './js/render-functions.js'\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\"; \n\n\nconst formElem = document.querySelector(\"#search-form\");\nconst loader =  document.querySelector('.hide');\nconst loaderMoreBtn = document.querySelector(\".loader-more\")\n\n\nlet userQuery = \"\";\n\nformElem.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    userQuery =  formElem.elements.input.value;\nshowLoader();\n\ntry{\n    const res = await fetchImages(userQuery);\n         renderGallery(res);\n            hideLoader();\n            clearForm();\n\n            loaderMoreBtn.classList.remove('hide');\n\n        }  catch (error) {\n            console.log(error);\n            hideLoader();\n        }\n        \n}) \n\nloaderMoreBtn.addEventListener('click', async () => {\n    showLoader();\n\n    try {\n        const res = await fetchImages(userQuery);\n        renderGallery(res);\n        hideLoader();\n\n\n        const card = document.querySelector(\".card\");\n        const cardHeight = card.getBoundingClientRect().height;\n\n        window.scrollBy({\n            left: 0,\n            top: cardHeight * 2,\n            behavior: \"smooth\"\n        })\n\n        if (page * per_page >= totalHits) {\n            loaderMoreBtn.classList.add('hide'); \n            iziToast.info({\n              position: \"center\",\n              title: 'Information',\n              message: \"We're sorry, but you've reached the end of search results.\"\n            });\n          }\n\n\n    } catch (error) {\n       console.log(error);\n        hideLoader();\n    }\n});\n\n\n\nfunction showLoader (){\nloader.classList.remove('hide');\n}\n\nfunction hideLoader (){\n    loader.classList.add('hide');\n}\n\nfunction clearForm () {\n    formElem.reset();\n}\n"],"names":["API_KEY","page","totalHits","per_page","fetchImages","searchImg","url","response","axios","data","iziToast","lightbox","SimpleLightbox","renderGallery","images","galleryContainer","createImageCard","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formElem","loader","loaderMoreBtn","userQuery","e","showLoader","res","hideLoader","clearForm","error","cardHeight"],"mappings":"owBAIA,MAAMA,EAAU,qCACT,IAAIC,EAAO,EACPC,EAAY,EAChB,MAAMC,EAAW,GAEjB,eAAeC,EAAaC,EAAU,CAC3CJ,EAAO,EAEP,MAAMK,EAAM,gCAAgCN,CAAO,MAAMK,CAAS,0BAA0BJ,CAAI,aAAaE,CAAQ,0CAGvH,GAAI,CACF,MAAMI,EAAW,MAAMC,EAAM,IAAIF,CAAG,EAElC,GAAI,CAACC,EAAS,KACZ,MAAM,IAAI,MAAO,EAAE,EAGrB,MAAME,EAAOF,EAAS,KAIpB,OAFFL,EAAYO,EAAK,UAEZA,EAAK,KAAK,OAAS,GACpBR,GAAQ,EACDQ,EAAK,OAGZC,EAAS,MAAM,CACb,SAAU,SACV,MAAO,QACP,QAAS,0EACnB,CAAS,EACM,GAGV,MAAc,CACb,OAAAA,EAAS,MAAM,CACb,SAAU,SACV,MAAO,QACP,QAAS,0EACjB,CAAO,EAEM,EACR,CAEL,CC5CA,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,gBAAiB,QAEnB,CAAC,EACM,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAAmB,SAAS,eAAe,SAAS,EAC1DA,EAAiB,UAAYD,EAAO,IAAIE,CAAe,EAAE,KAAK,EAAE,EAG/DL,EAAS,QAAO,CAElB,CAED,SAASK,EAAgBC,EAAO,CAC9B,KAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EAEjF,MAAO;AAAA,cACGE,CAAa;AAAA,aACdD,CAAY;AAAA,aACZE,CAAI;AAAA;AAAA;AAAA,uDAGsCG,CAAQ;AAAA,oDACXD,CAAK;AAAA,oDACLD,CAAK;AAAA,uDACFG,CAAS;AAAA;AAAA,QAKhE,CC/BA,MAAMC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAgB,SAAS,cAAc,cAAc,EAG3D,IAAIC,EAAY,GAEhBH,EAAS,iBAAiB,SAAU,MAAOI,GAAM,CAC7CA,EAAE,eAAc,EAChBD,EAAaH,EAAS,SAAS,MAAM,MACzCK,IAEA,GAAG,CACC,MAAMC,EAAM,MAAM3B,EAAYwB,CAAS,EAClCf,EAAckB,CAAG,EACdC,IACAC,IAEAN,EAAc,UAAU,OAAO,MAAM,CAExC,OAASO,EAAO,CACb,QAAQ,IAAIA,CAAK,EACjBF,GACH,CAET,CAAC,EAEDL,EAAc,iBAAiB,QAAS,SAAY,CAChDG,IAEA,GAAI,CACA,MAAMC,EAAM,MAAM3B,EAAYwB,CAAS,EACvCf,EAAckB,CAAG,EACjBC,IAIA,MAAMG,EADO,SAAS,cAAc,OAAO,EACnB,sBAAqB,EAAG,OAEhD,OAAO,SAAS,CACZ,KAAM,EACN,IAAKA,EAAa,EAClB,SAAU,QACtB,CAAS,EAEGlC,EAAOE,GAAYD,IACnByB,EAAc,UAAU,IAAI,MAAM,EAClCjB,EAAS,KAAK,CACZ,SAAU,SACV,MAAO,cACP,QAAS,4DACvB,CAAa,EAIR,OAAQwB,EAAO,CACb,QAAQ,IAAIA,CAAK,EAChBF,GACH,CACL,CAAC,EAID,SAASF,GAAa,CACtBJ,EAAO,UAAU,OAAO,MAAM,CAC9B,CAEA,SAASM,GAAa,CAClBN,EAAO,UAAU,IAAI,MAAM,CAC/B,CAEA,SAASO,GAAa,CAClBR,EAAS,MAAK,CAClB"}